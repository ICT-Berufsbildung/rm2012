<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>SELFHTML: Webserver/CGI / Webserver / Umleitungen mit mod_rewrite</title>
<link rel="stylesheet" type="text/css" href="../../src/selfhtml.css">
<meta name="description"    content="Wie Sie URL-Umleitungen mit dem Apache-Modul mod_rewrite realisieren können.">
<meta name="keywords"       content="SELFHTML, CGI, Web-Server, Webserver, HTTP, Apache, mod_rewrite, URL, Rewrite, Redirect">
<meta name="author"         content="Redaktion SELFHTML, selfhtml81@selfhtml.org">
<meta name="robots"         content="noindex, nofollow">
<meta name="DC.Publisher"   content="SELFHTML e. V.">
<meta name="DC.Date"        content="2005-11-10T19:31:11+01:00">
<meta name="DC.Identifier"  content="http://de.selfhtml.org/servercgi/server/rewrite.htm">
<meta name="DC.Language"    content="de">
<meta name="DC.Rights"      content="../../editorial/copyright.htm">
<meta name="DC.Date.created" content="2001-10-27T08:00+01:00">
<meta name="SELF.Pagetype"  content="page">
<link rel="alternate" type="application/atom+xml" title="SELFHTML-Weblog (Atom, gesamt)" href="http://aktuell.de.selfhtml.org/weblog/atom-feed">
<link rel="alternate" type="application/rss+xml" title="SELFHTML-Weblog (RSS, Auszüge)" href="http://aktuell.de.selfhtml.org/weblog/rss-feed">
<link rel="shortcut icon" type="image/x-icon" href="../../src/favicon.ico">
<link rel="author" title="Impressum" href="../../editorial/impressum.htm">
<link rel="contents" title="Inhaltsverzeichnis" href="../../navigation/inhalt.htm">
<link rel="index" title="Stichwortverzeichnis" href="../../navigation/stichwort.htm">
<link rel="search" title="Suche" href="../../navigation/suche/index.htm">
<link rel="help" title="Hilfe" href="../../editorial/index.htm">
<link rel="copyright" title="Urheberrecht" href="../../editorial/copyright.htm">
<link rel="top" title="SELFHTML" href="../../index.htm">
<link rel="up" title="Webserver" href="index.htm">
<link rel="next" title="Andere Webserver" href="andereserver.htm">
<link rel="prev" title=".htaccess - Server-Reaktionen kontrollieren" href="htaccess.htm">
<link rel="first" title="Webserver lokal auf einem PC einrichten" href="allgemein.htm">
<link rel="last" title="HTTP-Status-Codes" href="httpstatuscodes.htm">
</head>
<body>

<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr>
<td colspan="2" class="nav"><a class="an" name="top"><img src="../../src/refkap.gif" width="16" height="13" alt="Teil von"></a> <a href="../../index.htm">SELFHTML</a>/<a href="../../navigation/index.htm" target="_parent" class="navh">Navigationshilfen</a> <img src="../../src/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="../index.htm">Webserver/CGI</a> <img src="../../src/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="index.htm">Webserver</a></td>
</tr>
<tr>
<td class="doc" width="110"><a href="../../index.htm"><img src="../../src/logo.gif" width="106" height="109" border="0" alt="SELFHTML"></a></td>
<td class="docbot" width="100%"><h1 class="ph1">Umleitungen mit mod_rewrite</h1></td>
</tr>
<tr>
<td class="doctop">
<img src="../../src/dokx.gif" width="30" height="20" vspace="6" alt="Informationsseite">
</td>
<td valign="top" nowrap="nowrap">
<p>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#allgemein">Allgemeines</a> - URLs manipulieren mit mod_rewrite<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewritebase">RewriteBase</a> - Basis für eine Umleitung definieren<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewritecond">RewriteCond</a> - Bedingung für eine Umleitung definieren<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewriteengine">RewriteEngine</a> - mod_rewrite ein- und ausschalten<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewritelog">RewriteLog</a> - Log-Datei für mod_rewrite bestimmen<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewriteloglevel">RewriteLogLevel</a> - Art der Log-Meldungen bestimmen<br>
<img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewriterule">RewriteRule</a> - Umleitungen bestimmen<br>
</p>
</td>
</tr><tr><td colspan="2" class="doc">&nbsp;<a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a>&nbsp;</td></tr>
</table>



<h2><a class="an" name="allgemein">Allgemeines - URLs manipulieren mit mod_rewrite</a></h2>

<p><var>mod_rewrite</var> ist ein Modul, das Sie mit Hilfe der <var>LoadModule</var>-Anweisung in Ihrer <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#konfiguration">httpd.conf</a> aktivieren können. Mit diesem Modul sind Sie in der Lage, URLs einfach zu manipulieren. Das heißt, ein Besucher, der eine von Ihrem Server verwaltete URL aufruft, kann beispielsweise automatisch auf eine andere Adresse umgeleitet werden. Um solche Umleitungen zu realisieren, stellt Ihnen <var>mod_rewrite</var> eine Reihe von Anweisungen zur Verfügung, die im folgenden kurz erläutert werden sollen. Sie können solche Regeln an unterschiedlichen Stellen notieren, beispielsweise in einem <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Container innerhalb Ihrer httpd.conf, in einem <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">VirtualHost</a>-Abschnitt oder aber innerhalb einer <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="htaccess.htm">.htaccess-Datei</a>. Von dieser letzten Möglichkeit wird zunehmend Gebrauch gemacht, da immer mehr Provider ihren Kunden den Einsatz solcher Dateien gestatten.</p>

<p>Die Apache-Entwickler selbst betonen, dass <var>mod_rewrite</var> ein "mächtiger Killer" sei: "Mit <var>mod_rewrite</var> schießen Sie sich beim ersten Gebrauch entweder selbst in den Fuß und wollen es dann nie wieder verwenden, oder aber Sie lernen es wegen seiner Power lieben und wollen es Ihr ganzes weiteres Leben nicht mehr missen" (siehe <img src="../../src/en.gif" width="16" height="10" alt="englischsprachige Seite">&nbsp;<a target="_top" href="http://httpd.apache.org/docs-2.2/misc/rewriteguide.html">URL Rewriting Guide</a>).</p>

<h3 class="xmp">Beispiel:</h3>

<pre>
RewriteEngine on
RewriteRule (.*)\.html$ /cgi-bin/script.pl?var=$1
</pre>

<p>Das Beispiel bewirkt, dass alle Zugriffe auf <var>.html</var>-Dateien im Basis-Verzeichnis des Webservers auf ein Script umgeleitet werden, wobei der Name der aufgerufenen Datei als Parameter übergeben wird.</p>

<p>Grundsätzlich benötigt man für URL-Manipulationen nur die <img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewriterule">RewriteRule</a>-Direktive. Allerdings muss einmal mit <img src="../../src/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewriteengine">Rewrite Engine</a> <var>mod_rewrite</var> eingeschaltet werden. Obwohl es bei den meisten Direktiven egal ist, ob Sie diese in einer Server-Konfigurationsdatei wie die <var>httpd.conf</var> oder in einer <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="htaccess.htm">.htaccess-Datei</a> verwenden, sollten Sie, um Performance-Einbußen zu vermeiden, diese in der Server-Konfiguration verwenden, falls Ihnen das erlaubt ist. Einige Optionen verursachen ähnliche Probleme, weshalb Sie alle Optionen nur mit Bedacht benutzen sollten.</p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewritebase">RewriteBase - Basis für eine Umleitung definieren</a></h2>

<p>Diese Regel darf an folgenden Stellen der Apache-Konfiguration notiert werden: <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Container, <var>.htaccess</var></p>

<p>Sie benötigen <var>RewriteBase</var>, wenn das Verzeichnis, in dem die Umleitung stattfindet, nicht über Ihren eigentlichen (physischen) Namen erreichbar ist (beispielsweise, wenn man einen <var>Alias</var> auf das Verzeichnis gesetzt hat). Sie müssen mod_rewrite dann mitteilen, wie das Verzeichnis erreichbar ist.</p>

<h3 class="xmp">Beispiel:</h3>
<pre>
RewriteEngine on

#
# die Datei liegt im Verzeichnis /abc/def
# erreichbar ist dieses Verzeichnis aber über /xyz
# bspw. weil in der httpd.conf folgendes gesetzt wurde:
# Alias /xyz /abc/def
#

RewriteBase /xyz
RewriteRule ^(.*)\.htm$ $1.html # macht alle *.html auch als *.htm erreichbar

</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Da das physische Verzeichnis /abc/def nicht darüber aufgerufen wird, würde, wenn man keine RewriteBase angibt, die RewriteRule nicht funktionieren. Durch diese Angabe macht man <var>mod_rewrite</var> den passenden <var>Alias</var> bekannt.</p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewritecond">RewriteCond - Bedingung für eine Umleitung definieren</a></h2>

<p>Diese Regel darf an folgenden Stellen der Apache-Konfiguration notiert werden: Serverkonfiguration allgemein, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">VirtualHost</a>, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Container, <var>.htaccess</var>.</p>

<p><var>RewriteCond</var> beschreibt eine Bedingung, die erfüllt sein muss, damit die RewriteRule ausgeführt wird.</p>

<p>Erwartet als Parameter:</p>

<ol>
<li><var>Test-String</var> - eine Zeichenkette, die überprüft werden soll</li>
<li><var>Bedingung</var> - beschreibt die Überprüfung, die auf <var>Test-String</var> angewendet werden soll</li>
<li>[<var>flags</var>] - Zusätzliche Optionen (optional)</li>
</ol>

<h3 class="inf"><a name="rewritecondexpr">Test-String</a></h3>
<p><var>Test-String</var> ist eine Zeichenkette, die neben gewöhnlichem Text auch folgende Konstrukte beinhalten kann:</p>

<table class="reftable" cellpadding="3" cellspacing="0" border="1">
<tr>
<th>Nr.</th>
<th nowrap="nowrap"><var>Test-String</var></th>
<th nowrap="nowrap">Erklärung</th>
</tr>
<tr>
<th>1.</th>
<td class="code" nowrap="nowrap"><code>$1</code></td>
<td class="tabxpl">Mit $N (1 &lt;= N &lt;= 9) kann man auf zwischengespeicherte Werte der aktuellen RewriteRule-Direktive zugreifen</td>
</tr>
<tr>
<th>2.</th>
<td class="code" nowrap="nowrap"><code>%2</code></td>
<td class="tabxpl">Mit %N (1 &lt;= N &lt;= 9) kann man auf zwischengespeicherte Werte der letzten RewriteCond-Direktive zugreifen</td>
</tr>
</table>

<h3 class="inf">Bedingung</h3>

<p><var>Bedingung</var> beschreibt die Bedingung, die auf den <var>Test-String</var> zutreffen muss. <var>Bedingung</var> ist ein Perl-kompatibler <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="../../perl/sprache/regexpr.htm">Regulärer Ausdruck</a> (ohne Begrenzerzeichen, '/'). Alternativ können folgende Erweiterungen benutzt werden:</p>

<table class="reftable" cellpadding="3" cellspacing="0" border="1">
<tr>
<th>Nr.</th>
<th><var>Bedingung</var></th>
<th>Erklärung</th>
</tr>
<tr>
<th>1.</th>
<td class="code" nowrap="nowrap"><code>&lt;<var>Vergleichsstring</var></code></td>
<td class="tabxpl">Der <var>Test-String</var> ist im Alphabet vor dem <var>Vergleichsstring</var></td>
</tr>
<tr>
<th >2.</th>
<td class="code" nowrap="nowrap"><code>&gt;<var>Vergleichsstring</var></code></td>
<td class="tabxpl">Der <var>Test-String</var> ist im Alphabet nach dem <var>Vergleichsstring</var></td>
</tr>
<tr>
<th>3.</th>
<td class="code" nowrap="nowrap"><code>=<var>Vergleichsstring</var></code></td>
<td class="tabxpl"><var>Test-String</var> und <var>Vergleichsstring</var> werden auf Gleichheit überprüft. Wenn der <var>Vergleichsstring</var> "" ist, wird geprüft, ob der <var>Test-String</var> leer ist</td>
</tr>
<tr>
<th>4.</th>
<td class="code" nowrap="nowrap"><code>-d</code></td>
<td class="tabxpl">Der <var>Test-String</var> wird als Pfadname interpretiert und es wird überprüft, ob es ein Verzeichnis ist (d: directory, Verzeichnis)</td>
</tr>
<tr>
<th>5.</th>
<td class="code" nowrap="nowrap"><code>-f</code></td>
<td class="tabxpl">Der <var>Test-String</var> wird als Pfadname interpretiert und es wird überprüft, ob es eine reguläre Datei ist (f: file, Datei)</td>
</tr>
<tr>
<th>6.</th>
<td class="code" nowrap="nowrap"><code>-s</code></td>
<td class="tabxpl">Der <var>Test-String</var> wird als Pfadname interpretiert und es wird überprüft, ob es eine reguläre Datei mit einen Inhalt größer als 0 ist (s: size, Größe)</td>
</tr>
<tr>
<th>7.</th>
<td class="code" nowrap="nowrap"><code>-l</code></td>
<td class="tabxpl">Der <var>Test-String</var> wird als Pfadname interpretiert und es wird überprüft, ob es ein symbolischer Link ist (l: link, Verknüpfung)</td>
</tr>
<tr>
<th>8.</th>
<td class="code" nowrap="nowrap"><code>-F</code></td>
<td class="tabxpl">Der <var>Test-String</var> wird als Pfadname interpretiert und es wird überprüft, ob es eine Datei ist und diese zugänglich ist (inklusive Zugangskontrollen, z.B. mit <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="htaccess.htm#verzeichnisschutz">.htaccess</a>)</td>
</tr>
<tr>
<th>9.</th>
<td class="code" nowrap="nowrap"><code>-U</code></td>
<td class="tabxpl">Es wird überprüft, ob <var>Test-String</var>  eine gültige URL ist (inklusive Zugangskontrollen, z.B. mit <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="htaccess.htm#verzeichnisschutz">.htaccess</a>)</td>
</tr>
</table>

<h3 class="inf">Beachten Sie:</h3>

<p>Allen diesen Ausdrücken kann ein Ausrufezeichen (<var>!</var>) vorangestellt werden, um die Ausdrücke zu verneinen. Bei den Beispielen (<strong>8.-9.</strong>) wird ein interner Aufruf auf diese Datei gestartet, deshalb verschlechtern diese Optionen die Server-Performance sehr stark.</p>

<h3 class="inf">Flags</h3>

<p>Die Angabe von <var>flags</var> ist optional. Damit kann man das Verhalten der RewriteCond beeinflussen. Erlaubt sind folgende Werte:</p>

<table class="reftable" cellpadding="3" cellspacing="0" border="1">
<tr>
<th>Nr.</th>
<th><var>flag</var></th>
<th>Alternative</th>
<th>Erklärung</th>
</tr>
<tr>
<th>1.</th>
<td class="code"><code>NC</code></td>
<td class="code"><code>nocase</code></td>
<td class="tabxpl">Bei String-Vergleichen wird nicht mehr zwischen Groß- und Kleinschreibung unterschieden</td>
</tr>
<tr>
<th>2.</th>
<td class="code"><code>OR</code></td>
<td class="code"><code>ornext</code></td>
<td class="tabxpl">Mit diesem Flag wird die aktuelle Bedingung mit einem logischen ODER mit der nächsten Bedingung verknüpft (Standard ist eine UND-Verknüpfung), das heißt, es braucht nur eine der beiden Bedingungen zuzutreffen.</td>
</tr>
</table>

<h3 class="inf">Beachten Sie:</h3>

<p>Sie können mehrere Flags verwenden, indem Sie diese mit einem Komma (<var>,</var>) trennen.</p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewriteengine">RewriteEngine - mod_rewrite ein- und ausschalten</a></h2>

<p>Diese Regel darf an folgenden Stellen der Apache-Konfiguration notiert werden: Serverkonfiguration allgemein, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">VirtualHost</a>, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Container, <var>.htaccess</var>.</p>

<p>Mit dieser Direktive schalten Sie <var>mod_rewrite</var> ein. Wenn Sie <var>RewriteEngine</var> auf <var>off</var> stellen, können Sie <var>mod_rewrite</var> nicht benutzen.</p>

<h3 class="xmp">Beispiel:</h3>

<pre>
RewriteEngine on
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Mit dieser Zeile wird der Webserver angewiesen, <var>mod_rewrite</var> einzuschalten.</p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewritelog">RewriteLog - Log-Datei für mod_rewrite bestimmen</a></h2>

<p>Diese Regel darf an folgenden Stellen der Apache-Konfiguration notiert werden: Serverkonfiguration allgemein, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">VirtualHost</a>, aber <strong>nicht</strong> in <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Containern und <var>.htaccess</var>.</p>

<p>Mit <var>RewriteLog</var> setzen Sie den Namen der Datei, in die <var>mod_rewrite</var> seine Logmeldungen schreibt. Wenn <var>Dateipfad</var> nicht mit einem "/" beginnt, dann wird die Datei relativ zu der Umgebungsvariable <var>ServerRoot</var> gesucht. Diese Anweisung sollte nur einmal in der Server-Konfiguration notiert werden.</p>

<h3 class="inf">Sicherheitshinweis:</h3>

<p>Sorgen Sie dafür, dass das Verzeichnis, in dem die Log-Datei liegt, nur vom Benutzer, der den Server startet, beschrieben werden kann. Die <img src="../../src/en.gif" width="16" height="10" alt="englischsprachige Seite">&nbsp;<a target="_top" href="http://httpd.apache.org/docs-2.2/misc/security_tips.html">Apache Security Tips</a> geben Ihnen dazu Hinweise.</p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewriteloglevel">RewriteLogLevel - Art der Log-Meldungen bestimmen</a></h2>

<p>Diese Regel darf an folgenden Stellen der Apache-Konfiguration notiert werden: Serverkonfiguration allgemein, <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">VirtualHost</a>, aber <strong>nicht</strong> in <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="apache.htm#container">Directory</a>-Containern und <var>.htaccess</var>.</p>

<p>Mit dieser Direktive können Sie angeben, welche Aktionen <var>mod_rewrite</var> protokolliert. Erlaubte Werte für <var>Log-Level</var> sind natürliche Zahlen. Standardmäßig ist <var>RewriteLogLevel</var> auf 0 eingestellt, was bewirkt, dass Apache keine Aktionen von <var>mod_rewrite</var> protokolliert. Ein Wert von 1 bedeutet, dass nur sehr signifikante Meldungen protokolliert werden. Je höher der Wert, desto mehr Meldungen werden ins Protokoll aufgenommen.</p>

<h3 class="xmp">Beispiel:</h3>

<pre>
RewriteLog "/var/www/mod_rewrite.log"
RewriteLogLevel 2
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Bei diesem Beispiel wird mod_rewrite angewiesen, Log-Meldungen in die Datei "/var/www/mod_rewrite.log" zu schreiben. Weiterhin wird festgelegt, welche Meldungen protokolliert werden.</p>

<h3 class="inf">Beachten Sie:</h3>
<p>Benutzen Sie Werte für <var>Log-Level</var> größer als 2 nur für Debugging-Zwecke, da es den Apache deutlich verlangsamt. </p>



<p class="doc"><a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="#bottom"><img src="../../src/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="rewriterule">RewriteRule - Umleitungen bestimmen</a></h2>

<p><var>RewriteRule</var> definiert die eigentliche Umleitung. Sie kann mehrmals vorkommen, dabei ergibt jedes Vorkommnis eine eigene Umleitung. Die Reihenfolge der Umleitungen ist wichtig, da diese in der Reihenfolge ihres Vorkommens angewendet werden.</p>

<p>Erwartet als Parameter:</p>

<ol>
<li><var>Ausdruck</var> - beschreibt die URLs, die umgeleitet werden sollen</li>
<li><var>Umleitung</var> - gibt die Umleitung an</li>
</ol>

<h3 class="inf">Ausdruck</h3>

<p><var>Ausdruck</var> beschreibt die URLs, die umgeleitet werden. Es ist ein Perl-kompatibler <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="../../perl/sprache/regexpr.htm">Regulärer Ausdruck</a> (ohne Begrenzerzeichen, '/'). Vor dem Ausdruck kann zusätzlich ein Ausrufezeichen ('!') stehen, um den Regulären Ausdruck zu negieren.</p>

<h3 class="inf">Umleitung</h3>

<p><var>Umleitung</var> ist die URL, auf die umgeleitet wird, wenn der <var>Ausdruck</var> zutrifft. Neben normalem Text können Sie die gleichen Ausdrücke verwenden, die Sie auch in <var>Test-Strings</var> von <img src="../../src/up.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="#rewritecondexpr">RewriteCond</a>-Direktiven benutzen können. Wenn Sie auf Server-Ebene konfigurieren, dann wird die komplette URL ersetzt, auf Verzeichnis-Ebene (in <var>.htaccess</var> bzw. in einem <var>Directory</var>-Container in der zentralen Apache-Konfiguration) wird nur der Pfad ab dem aktuellen Verzeichnis ersetzt. Es werden danach noch alle weiteren RewriteRule-Direktiven abgearbeitet, sodass sich die URL nochmals ändern kann. Wenn Sie für <var>Umleitung</var> den String <code>-</code> angeben, dann wird keine Ersetzung durchgeführt. </p>

<p>Am Ende der RewriteRule können Sie noch optional einige weitere Optionen angeben, welche das Verhalten von mod_rewrite steuern, falls die RewriteRule zutrifft. Diese werden in spitzen Klammern (<code>[</code> bzw. <code>]</code>) notiert. Wenn Sie mehrere angeben, trennen Sie diese durch Kommata. Folgende Optionen können Sie angeben:</p>

<table class="reftable" cellpadding="3" cellspacing="0" border="1">
<tr>
<th>Nr.</th>
<th>Option</th>
<th>Alternative</th>
<th>Erklärung</th>
</tr>
<tr>
<th>1.</th>
<td class="code"><code>redirect</code></td>
<td class="code"><code>R</code></td>
<td class="tabxpl">Apache wird angewiesen, eine externe Umleitung mit dem <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="httpstatuscodes.htm">HTTP-Statuscode</a> 302 durchzuführen. Wollen Sie einen anderen Statuscode senden, dann geben Sie ihn nach einem Gleichheitszeichen nach diesem Flag an. Es gibt einige vordefinierte Namen für einige Statuscode: <var>temp</var> (302, MOVED TEMPORARILY), <var>permanent</var> (301, MOVED PERMANENTLY) und <var>seeother</var> (303, See Other).</td>
</tr>
<tr>
<th>2.</th>
<td class="code"><code>forbidden</code></td>
<td class="code"><code>F</code></td>
<td class="tabxpl">Sendet sofort den <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="httpstatuscodes.htm">HTTP-Statuscode</a> 403 (FORBIDDEN) an den Browser.</td>
</tr>
<tr>
<th>3.</th>
<td class="code"><code>gone</code></td>
<td class="code"><code>G</code></td>
<td class="tabxpl">Sendet sofort den <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="httpstatuscodes.htm">HTTP-Statuscode</a> 410 (GONE) an den Browser und markiert diese Seite damit als nicht mehr vorhanden..</td>
</tr>
<tr>
<th>4.</th>
<td class="code"><code>last</code></td>
<td class="code"><code>L</code></td>
<td class="tabxpl">Wenn Sie diese Option angeben, wird nach dieser RewriteRule keine weitere mehr ausgeführt.</td>
</tr>
<tr>
<th>5.</th>
<td class="code"><code>next</code></td>
<td class="code"><code>N</code></td>
<td class="tabxpl">Bewirkt, dass die Abarbeitung der RewriteRule-Direktiven abgebrochen und nochmals gestartet wird. Achten Sie darauf, dass Sie mit dieser Regel keine Endlosschleifen erzeugen.</td>
</tr>
<tr>
<th>6.</th>
<td class="code"><code>chain</code></td>
<td class="code"><code>C</code></td>
<td class="tabxpl">Bewirkt, dass die nächste RewriteRule nur ausgewertet wird, falls die aktuelle Regel zutrifft.</td>
</tr>
<tr>
<th>7.</th>
<td class="code"><code>type=</code></td>
<td class="code"><code>T=</code></td>
<td class="tabxpl">Mit dieser Option können Sie einen bestimmten <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="../../diverses/mimetypen.htm">MIME-Typen</a> bestimmen.</td>
</tr>
<tr>
<th>8.</th>
<td class="code"><code>nosubreq</code></td>
<td class="code"><code>NS</code></td>
<td class="tabxpl">Diese Option bewirkt, dass die Regel übersprungen wird, falls der aktuelle Request ein Sub-Request ist.</td>
</tr>
<tr>
<th>9.</th>
<td class="code"><code>nocase</code></td>
<td class="code"><code>NC</code></td>
<td class="tabxpl">Bewirkt, dass bei der Überprüfung auf Gleichheit des <var>Ausdruck</var>s und der URL nicht auf Groß- und Kleinschreibung geachtet wird.</td>
</tr>
<tr>
<th>10.</th>
<td class="code"><code>qsappend</code></td>
<td class="code"><code>QSA</code></td>
<td class="tabxpl">Diese Option müssen Sie angeben, wenn Sie an die <var>Umleitung</var> manuell einen neuen Query-String hängen und den alten dabei nicht komplett ersetzen wollen.</td>
</tr>
<tr>
<th>11.</th>
<td class="code"><code>noescape</code></td>
<td class="code"><code>NE</code></td>
<td class="tabxpl">Standardmäßig werden bestimmte Sonderzeichen von mod_rewrite maskiert. Mit dieser Option schalten Sie dies aus.</td>
</tr>
<tr>
<th>12.</th>
<td class="code" nowrap="nowrap"><code>skip=</code>N</td>
<td class="code" nowrap="nowrap"><code>S=</code>N</td>
<td class="tabxpl">Mit dieser Option können Sie die nächsten N RewriteRule-Direktiven überspringen</td>
</tr>
<tr>
<th>13.</th>
<td class="code" nowrap="nowrap"><code>env=</code>VAR:VAL</td>
<td class="code" nowrap="nowrap"><code>E=</code>VAR:VAL</td>
<td class="tabxpl">Mit dieser Option können Sie eine Umgebungsvariable erzeugen, hier etwa die Variable VAR mit dem Wert VAL.</td>
</tr>
<tr>
<th>14.</th>
<td class="code" nowrap="nowrap"><code>cookie=</code>NAME:VAL:domain[:lifetime[:path]]</td>
<td class="code" nowrap="nowrap"><code>CO=</code></td>
<td class="tabxpl">Mit dieser Option setzen Sie ein Cookie namens NAME mit dem Wert VAL und Domain als domain. Optional sind die Argumente lifetime (Lebenszeit in Minuten) und path (Pfad des Cookies).</td>
</tr>
<tr>
<th>15.</th>
<td class="code" nowrap="nowrap"><code>proxy</code></td>
<td class="code" nowrap="nowrap"><code>P</code></td>
<td class="tabxpl">Diese Option sorgt dafür, dass ein Zugriff von dem Apache-Modul mod_proxy aus auf die URL erfolgt. Dazu muss mod_proxy aktiviert und die URL muss valide sein (sie muss unter anderem auf jeden Fall mit http://hostname beginnen).</td>
</tr>
<tr>
<th>16.</th>
<td class="code" nowrap="nowrap"><code>passthrough</code></td>
<td class="code" nowrap="nowrap"><code>PT</code></td>
<td class="tabxpl">Benutzen Sie diese Option, wenn Sie mehrere URL-&gt;Dateinamen-Übersetzer (wie etwa mod_alias und mod_rewrite) zusammen benutzen.</td>
</tr>
</table>&nbsp;<br>



<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tr><td colspan="2" class="doc">
&nbsp;<a href="#top"><img src="../../src/up.gif" width="14" height="10" border="0" alt="nach oben"></a>
</td></tr>
<tr><td class="doc"><a href="httpstatuscodes.htm"><img src="../../src/next.gif" width="10" height="10" border="0" hspace="10" alt="weiter"></a></td>
<td width="100%"><img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="andereserver.htm">Andere Webserver</a>
</td></tr>
<tr>
<td class="doc"><a href="htaccess.htm"><img src="../../src/prev.gif" width="10" height="10" border="0" hspace="10" alt="zurück"></a></td>
<td><img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="htaccess.htm">.htaccess - Server-Reaktionen kontrollieren</a>
</td>
</tr>
<tr><td colspan="2" class="doc">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="nav"><a class="an" name="bottom"><img src="../../src/refkap.gif" width="16" height="13" alt="Teil von"></a> <a href="../../index.htm">SELFHTML</a>/<a href="../../navigation/index.htm" target="_parent" class="navh">Navigationshilfen</a> <img src="../../src/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="../index.htm">Webserver/CGI</a> <img src="../../src/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="index.htm">Webserver</a></td>
</tr>
</table>

<p>&copy; 2007 <img src="../../src/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="../../editorial/impressum.htm">Impressum</a></p>

</body>
</html>
